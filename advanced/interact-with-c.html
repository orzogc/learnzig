<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>与 C 交互 | Zig 语言圣经</title>
    <meta name="description" content="简单、快速地学习 Zig，ziglang中文教程，zig中文教程">
    <meta name="generator" content="VitePress v1.0.0-rc.44">
    <link rel="preload stylesheet" href="/zig-course/assets/style.BSuf0nCJ.css" as="style">
    
    <script type="module" src="/zig-course/assets/app.NAICwamC.js"></script>
    <link rel="preload" href="/zig-course/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/zig-course/assets/chunks/framework.C3vgFeqS.js">
    <link rel="modulepreload" href="/zig-course/assets/chunks/theme.DlXHtuhw.js">
    <link rel="modulepreload" href="/zig-course/assets/advanced_interact-with-c.md.DP2Wx2rI.lean.js">
    <link rel="icon" href="./favicon.ico">
    <link rel="apple-touch-icon" href="./apple-touch-icon.png" sizes="180x180">
    <link rel="mask-icon" href="./logo-square.svg" color="#FFFFFF">
    <meta name="theme-color" content="#ffffff">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="manifest" href="/zig-course/manifest.webmanifest">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-19c990f1><div class="wrapper" data-v-19c990f1><div class="container" data-v-19c990f1><div class="title" data-v-19c990f1><div class="VPNavBarTitle has-sidebar" data-v-19c990f1 data-v-ab179fa1><a class="title" href="/zig-course/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>Zig 语言圣经</span><!--[--><!--]--></a></div></div><div class="content" data-v-19c990f1><div class="content-body" data-v-19c990f1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-19c990f1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-19c990f1 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zig-course/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zig-course/about.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-19c990f1 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-19c990f1 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zigcc/zig-course" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-19c990f1 data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zigcc/zig-course" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-19c990f1 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-19c990f1><div class="divider-line" data-v-19c990f1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-d2ecc192><button data-v-d2ecc192>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><!----><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/prologue.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>前言</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>什么是 Zig ？</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>环境配置</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/environment/install-environment.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>安装 Zig 环境</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/environment/editor.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>编辑器选择</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/environment/zig-command.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>zig 命令</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><!----><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/hello-world.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Hello World</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>基础学习</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/define-variable.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>变量声明</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-93e7e794 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h3 class="text" data-v-93e7e794>基本类型</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/basic_type/number.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>数值类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/basic_type/char-and-boolean.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>字符与布尔值</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/basic_type/function.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>函数</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-93e7e794 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h3 class="text" data-v-93e7e794>高级类型</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/array.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>数组</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/vector.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>向量</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/pointer.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>指针</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/silce.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>切片</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/struct.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>结构体</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/enum.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>枚举</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/advanced_type/opaque.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>opaque</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/union.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>联合类型</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-93e7e794 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h3 class="text" data-v-93e7e794>流程控制</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-93e7e794><span class="vpi-chevron-right caret-icon" data-v-93e7e794></span></div></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/process_control/decision.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>条件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/process_control/loop.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>循环</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/process_control/switch.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>switch匹配</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/process_control/defer.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>defer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/process_control/unreachable.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>unreachable</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/optional_type.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>可选类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/basic/error_handle.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>错误处理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 has-active" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>进阶学习</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/type_cast.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>类型转换</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/memory_manage.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>内存管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/async.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>异步</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/comptime.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>编译期</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/package_management.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>包管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/assembly.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>汇编</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/advanced/interact-with-c.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>与 C 交互</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>工程化</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/engineering/build-system.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>构建系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/engineering/unit-test.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>单元测试</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>更多</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/more/reflection.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>反射</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/more/zero-type.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>零位类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/more/atomic.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>原子操作</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/more/undefined_behavior.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>未定义行为</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/more/style_guide.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>风格指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/more/miscellaneous.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>杂项</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>示例</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/examples/echo_tcp_server.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>echo server</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>附录</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/appendix/community.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>社区</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="/zig-course/appendix/well-known-lib.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>第三方库</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-935f8a84><div class="content" data-v-935f8a84><div class="outline-marker" data-v-935f8a84></div><div class="outline-title" role="heading" aria-level="2" data-v-935f8a84>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-935f8a84><span class="visually-hidden" id="doc-outline-aria-label" data-v-935f8a84> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-935f8a84 data-v-b933a997><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _zig-course_advanced_interact-with-c" data-v-39a288b8><div><h1 id="与-c-交互" tabindex="-1">与 C 交互 <a class="header-anchor" href="#与-c-交互" aria-label="Permalink to &quot;与 C 交互&quot;">​</a></h1><p>zig 作为一个可以独立于 C 的语言，不依赖 libc，但 zig 仍然具有非常强大的与 c 直接交互的能力，并远超其他语言。</p><div class="info custom-block"><p class="custom-block-title">🅿️ 提示</p><p>zig 所指的交互并不仅仅是使用 C 的库，zig 还可以作为 C 的编译器，导出 C ABI 兼容的库供其他程序使用。</p><p>并且 zig 使用 C 并不是通过 <a href="https://en.wikipedia.org/wiki/Foreign_function_interface" target="_blank" rel="noreferrer">FFI</a>/bindings 实现，而是近乎原生的调用，这归功于 zig 实现了一套 C 的编译器并且支持将 C 代码翻译为 zig 代码！</p></div><h2 id="c-abi-类型" tabindex="-1">C ABI 类型 <a class="header-anchor" href="#c-abi-类型" aria-label="Permalink to &quot;C ABI 类型&quot;">​</a></h2><p>zig 定义了几个对应 C ABI 的基本类型：</p><ul><li><code>c_char</code></li><li><code>c_short</code></li><li><code>c_ushort</code></li><li><code>c_int</code></li><li><code>c_uint</code></li><li><code>c_long</code></li><li><code>c_ulong</code></li><li><code>c_longlong</code></li><li><code>c_ulonglong</code></li><li><code>c_longdouble</code></li></ul><p>对应 C <code>void</code> 类型的时候，使用 <code>anyopaque</code> (大小未知的类型)。</p><h2 id="c-header-导入" tabindex="-1">C Header 导入 <a class="header-anchor" href="#c-header-导入" aria-label="Permalink to &quot;C Header 导入&quot;">​</a></h2><p>C 语言共享类型通常是通过引入头文件实现，这点在 zig 中可以无缝做到，得益于 zig 的 <strong>translate-c</strong> 功能。</p><p>接下来展示一个例子，简单地引入 c 标准库的 <code>printf</code> 函数：</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@cImport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    @cDefine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;_NO_CRT_STDIO_INLINE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    @cInclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stdio.h&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    _</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">🅿️ 提示</p><p>注意：为了构建这个，我们需要引入 <code>libc</code>，可以在 <code>build.zig</code> 中添加 <code>exe.linkLibC</code> 函数，<code>exe</code> 是默认的构建变量。</p><p>或者我们可以手动执行构建：<code>zig build-exe source.zig -lc</code></p></div><p><a href="https://ziglang.org/documentation/master/#cImport" target="_blank" rel="noreferrer"><code>@cImport</code></a> 函数接受一个表达式作为参数，该表达式会在编译期执行，用于控制预处理器指令并引入头文件。</p><div class="info custom-block"><p class="custom-block-title">🅿️ 提示</p><p>表达式内应仅包含 <a href="https://ziglang.org/documentation/master/#cInclude" target="_blank" rel="noreferrer"><code>@cInclude</code></a>、<a href="https://ziglang.org/documentation/master/#cDefine" target="_blank" rel="noreferrer"><code>@cDefine</code></a>、<a href="https://ziglang.org/documentation/master/#cUndef" target="_blank" rel="noreferrer"><code>@cUndef</code></a>，它们会在编译时进行解析并转换为 C 代码。</p><p>通常情况下，应当只存在一个 <code>@cImport</code>，这是防止编译器重复调用 clang，并且避免内联函数被重复，只有为了避免符号冲突（两个文件均定义了相同的标识符）和分析具有不同预处理定义的代码时才出现多个 <code>@cImport</code>。</p></div><h2 id="c-translation-cli" tabindex="-1"><code>C Translation CLI</code> <a class="header-anchor" href="#c-translation-cli" aria-label="Permalink to &quot;`C Translation CLI`&quot;">​</a></h2><p>zig 提供了一个命令行工具 <code>zig translate-c</code> 供我们使用，它可以将 C 的代码翻译为 zig 的代码，并将其输出到标准输出。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>注意：当前 zig 的 <code>translate-c</code> 功能并不完善，可能存在某些 bug，使用时请注意查询 issue！</p></div><h3 id="命令行参数" tabindex="-1">命令行参数 <a class="header-anchor" href="#命令行参数" aria-label="Permalink to &quot;命令行参数&quot;">​</a></h3><ul><li><code>-I</code>：指定 <code>include</code> 文件的搜索目录，可多次使用，相当于 clang 的 <code>-I</code> 标志，默认不包含当前目录（仅添加参数 <code>-I</code> 来添加当前目录）。</li><li><code>-D</code>：定义预处理器宏，相当于 clang 的 <code>-D</code> 标志。</li><li><code>-cflags [flags] --</code>：将任意附加命令行参数传递给 clang（注意：最后一定要加 <code>--</code>）。</li><li><code>-target</code>：zig 的构建目标三元组，缺省则使用本机作为构建目标。</li></ul><div class="info custom-block"><p class="custom-block-title">🅿️ 提示</p><p>完整的构架目标三元组可以在这里 <em><a href="https://ziglang.org/documentation/master/#Targets" target="_blank" rel="noreferrer">查看</a></em>。</p><p>在使用翻译功能时，需要保证 target 和传递的 cflags 是正确的，否则可能会出现解析失败或者与 C 代码链接时出现微妙的 ABI 不兼容问题。</p></div><h3 id="cimport-vs-translate-c" tabindex="-1"><code>@cImport</code> vs <code>translate-c</code> <a class="header-anchor" href="#cimport-vs-translate-c" aria-label="Permalink to &quot;`@cImport` vs `translate-c`&quot;">​</a></h3><p>事实上，这两个东西的底层实现是一样的，<code>@cImport</code> 一般用于使用 C 库时引入头文件，而 <code>translate-c</code> 通常是为了修改翻译后的代码，例如：将 <code>anytype</code> 修改为更加精确的类型、将 <code>[*c]T</code> 指针修改为 <code>[*]T</code> 或者 <code>*T</code> 来提高类型安全性、启动或者禁用某些运行时的安全性功能。</p><h2 id="c-翻译缓存" tabindex="-1">C 翻译缓存 <a class="header-anchor" href="#c-翻译缓存" aria-label="Permalink to &quot;C 翻译缓存&quot;">​</a></h2><p>C 翻译功能（无论是通过 <code>zig translate-c</code> 还是 <code>@cImport</code> 使用）与 Zig 缓存系统集成。使用相同源文件、目标和 <code>cflags</code> 的后续构建将使用缓存，而不是重复翻译相同的代码。</p><p>要在编译使用 <code>@cImport</code> 引入的代码时打印缓存文件的存储位置，请使用 <code>--verbose-cimport</code> 参数：</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 示例文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@cImport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    @cDefine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;_NO_CRT_STDIO_INLINE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    @cInclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stdio.h&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    _</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zig build-exe test.zig -lc --verbose-cimport</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info(compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): C import source: /home/username/.cache/zig/o/6f35761b17b87ee4c9f26e643a06e289/cimport.h</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info(compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): C import .d file: /home/username/.cache/zig/o/6f35761b17b87ee4c9f26e643a06e289/cimport.h.d</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info(compilation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): C import output: /home/username/.cache/zig/o/86899cd499e4c3f94aa141e400ac265f/cimport.zig</span></span></code></pre></div><p><code>cimport.h</code> 包含要翻译的文件（通过调用 <code>@cInclude</code>、<code>@cDefine</code> 和 <code>@cUndef</code> 构建），<code>cimport.h.d</code> 是文件依赖项列表，<code>cimport.zig</code> 包含翻译后的代码。</p><h2 id="c-翻译错误" tabindex="-1">C 翻译错误 <a class="header-anchor" href="#c-翻译错误" aria-label="Permalink to &quot;C 翻译错误&quot;">​</a></h2><p>针对某些 C 的结构，zig 会无法翻译，如：<code>goto</code>、使用位域（<strong>bitfields</strong>）的结构体、拼接（<strong>token-pasting</strong>）宏，zig 会暂时简单处理一下它们以继续翻译任务。</p><p>处理方式有三种：<code>opaque</code>、<code>extern</code>、<code>@compileError</code>。</p><ol><li>无法被正确翻译的 C 结构体和联合类型会被翻译为 <a href="./../basic/advanced_type/opaque.html"><code>opaque{}</code></a>。</li><li>包含 <code>opaque</code> 类型或者代码结构无法被翻译的函数会使用 <code>extern</code> 标记为外部连接函数，仅存在函数的声明，没有具体的定义。只要编译器知道去哪里找到函数的具体实现，那就可以正常使用。</li><li>当顶层空间（全局变量、函数原型、宏）无法转换或处理时，zig 会使用 <code>@compileError</code> ，但得益于 zig 针对顶级声明使用惰性分析，故只有在使用它们时才会报告编译错误。</li></ol><h2 id="c-macro" tabindex="-1">C Macro <a class="header-anchor" href="#c-macro" aria-label="Permalink to &quot;C Macro&quot;">​</a></h2><p>关于 C 中的宏，zig 会尽量将类似函数的宏定义转为对应的 zig 函数，但由于宏是在词法分析的级别上生效，并非所有宏均可以转为函数。无法翻译的宏会被转为 <code>@compileError</code> 错误。</p><div class="info custom-block"><p class="custom-block-title">🅿️ 提示</p><p>请注意，使用了宏的 C 代码转换并不会出问题，这是因为 zig 会在经过预处理器加工后的代码上进行翻译，只是翻译宏可能失败（但不排除当前因为 bug 导致翻译出错）。</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MAKELOCAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">INIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> INIT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   MAKELOCAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   MAKELOCAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    _</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    _</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> MAKELOCAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@compileError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unable to translate C expr: unexpected token .Equal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>例如，以上代码翻译完成后，函数 <code>foo</code> 是正常可以工作的，仅仅是宏 <code>MAKELOCAL</code> 无法正常使用！</p></div><h2 id="c-指针" tabindex="-1">C 指针 <a class="header-anchor" href="#c-指针" aria-label="Permalink to &quot;C 指针&quot;">​</a></h2><p>应当避免使用此类型，通常它仅出现在翻译输出代码中。</p><p>导入 C 头文件后，zig 并不知道如何处理指针（因为 C 的指针可以同时作为单项指针和多项指针使用），这会导致歧义，故 zig 引入一种新类型 <code>[*]T</code>，作为一种折中方案，新类型 <code>[*]T</code> 具有以下特点：</p><ol><li>支持 zig 普通指针（<code>*T</code> 和 <code>[*]T</code>）的全部语法。</li><li>可以强制转换为其他的任意指针类型，当然也包括可选指针类型（当被转换为非可选指针时，如果地址为 0，此时会触发安全检查的保护机制，报错并通知出现了未定义行为）。</li><li>允许地址为 0，在非 <code>freestanding</code>（可以简单看作裸机器，通常编写内核会使用这个）目标上，不允许取消引用地址为 0 的指针（会触发未定义行为）。可选的 C 指针引入一个位来跟踪 <code>null</code>，但通常它没有这样做，可以直接使用普通的可选指针。</li><li>支持与整数进行强制转换。</li><li>支持和整数进行比较。</li><li>不支持 zig 的指针特性，例如对齐（align）方式，如果要设置这些，请转换为普通指针后再进行操作！</li></ol><p>当 C 指针指向一个结构体时，此时它是单项指针，则可以这样解引用：</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ptr_to_struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">struct_member</span></span></code></pre></div><p>当 C 指针指向一个数组时，此时它是一个多项指针，则可以这样解引用：</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ptr_to_struct_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">struct_member</span></span></code></pre></div><h2 id="c-可变参数函数" tabindex="-1">C 可变参数函数 <a class="header-anchor" href="#c-可变参数函数" aria-label="Permalink to &quot;C 可变参数函数&quot;">​</a></h2><p>zig 支持外部（<code>extern</code>）可变参数函数：</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这是对应 C printf 的声明</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pub</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extern</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;c&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> printf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> u8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ...) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>可变参数的访问可以使用 <a href="https://ziglang.org/documentation/master/#cVaStart" target="_blank" rel="noreferrer"><code>@cVaStart</code></a>、<a href="https://ziglang.org/documentation/master/#cVaEnd" target="_blank" rel="noreferrer"><code>@cVaEnd</code></a>、<a href="https://ziglang.org/documentation/master/#cVaArg" target="_blank" rel="noreferrer"><code>@cVaArg</code></a> 和 <a href="https://ziglang.org/documentation/master/#cVaCopy" target="_blank" rel="noreferrer"><code>@cVaCopy</code></a> 来实现：</p><div class="language-zig vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zig</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;std&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用 callconv 声明函数调用约定为 C</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fn</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ...) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">callconv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">C</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 对应 C 的宏 va_start</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> ap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@cVaStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 对应 C 的宏 va_end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    defer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @cVaEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">usize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) : (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 对应 C 的宏 va_arg</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        sum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @cVaArg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">c_int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="额外内容" tabindex="-1">额外内容 <a class="header-anchor" href="#额外内容" aria-label="Permalink to &quot;额外内容&quot;">​</a></h2><p>以下是经过实践和总结出来的额外信息，官方的 ziglang 并未提供！</p><h3 id="为什么-zig-可以做到比-c-更好的编译" tabindex="-1">为什么 zig 可以做到比 c 更好的编译 <a class="header-anchor" href="#为什么-zig-可以做到比-c-更好的编译" aria-label="Permalink to &quot;为什么 zig 可以做到比 c 更好的编译&quot;">​</a></h3><p>实际上，zig 本身实现了一个 C 的编译器（目前仅限 linux，其他平台仍使用 llvm），当然不仅仅如此，zig 还提供了一个比较 <strong><em>magic</em></strong> 的东西—— <a href="https://github.com/ziglang/glibc-abi-tool" target="_blank" rel="noreferrer"><code>glibc-abi-tool</code></a>，这是一个收集每个版本的 glibc 的 <code>.abilist</code> 文件的存储库，还包含一个将它们组合成一个数据集的工具。</p><p>所以，zig 本身所谓的 “<strong><em>ships with libc</em></strong>” 并不准确，它的确分发 libc，但它只携带每个版本的符号库，仅依赖这个符号库，zig 就可以实现在没有 libc 的情况下仍然正确地进行动态链接！</p><div class="info custom-block"><p class="custom-block-title">🅿️ 提示</p><p>由于这种特性，这导致 zig 尽管携带了 40 个 libc，却仍然能保持 45MB（linux-x86-64）左右的大小，作为对比 llvm 分发的 clang 完整的工具链的大小多达好几百 M。</p><p>关于更多的细节，你可以参考以下链接：</p><ul><li><a href="https://github.com/ziglang/zig/blob/0.4.0/libc/process_headers.zig" target="_blank" rel="noreferrer">process_headers tool</a></li><li><a href="https://github.com/ziglang/zig/wiki/Updating-libc" target="_blank" rel="noreferrer">Updating libc</a></li><li><a href="https://news.ycombinator.com/item?id=29538264" target="_blank" rel="noreferrer">hacker news</a></li></ul></div><h3 id="zig-能静态链接-libc-吗" tabindex="-1">zig 能静态链接 libc 吗？ <a class="header-anchor" href="#zig-能静态链接-libc-吗" aria-label="Permalink to &quot;zig 能静态链接 libc 吗？&quot;">​</a></h3><p>能，又不能！</p><p>zig 支持静态链接 musl（针对linux的另一个 libc，目标为嵌入式系统与移动设备），其他仅支持动态链接。受益于这种特性，我们可以将它作为 C 编译器的替代品使用，它可以提供更加完善的工具链。</p><p>举个比较<em>剑走偏锋</em>的例子，go 的 cgo 特性一直为人们所吐槽，一旦使用了它，基本就要和 go 宣称的非常方便的交叉编译说拜拜了，但我们可以使用 zig 来帮助我们实现 cgo 的交叉编译：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-gnu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CXX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-gnu&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>设置 zig 作为 C 编译器来供 go 使用，只要对 zig 和 go 设置正确的target，就可以在本机实现完善的交叉编译。</p><p>再进一步，我们还可以构建出 linux 的使用 cgo 的静态链接的二进制可执行文件：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-musl&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CXX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zig cc -target x86_64-linux-musl&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CGO_CFLAGS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-D_LARGEFILE64_SOURCE&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build -ldflags=&#39;-linkmode=external -extldflags -static&#39;</span></span></code></pre></div><p>上方的 <code>CGO_CFLAGS</code> 是为了防止编译失败，<code>ldfalgs</code> 是为了指定静态链接！</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-09de1c0f><!--[--><!--]--><div class="edit-info" data-v-09de1c0f><div class="edit-link" data-v-09de1c0f><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/zigcc/zig-course/tree/main/course/advanced/interact-with-c.md" target="_blank" rel="noreferrer" data-v-09de1c0f><!--[--><span class="vpi-square-pen edit-link-icon" data-v-09de1c0f></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-09de1c0f><p class="VPLastUpdated" data-v-09de1c0f data-v-7e05ebdb>Last updated: <time datetime="2024-02-05T06:35:35.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-09de1c0f><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link prev" href="/zig-course/advanced/assembly.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>Previous page</span><span class="title" data-v-09de1c0f>汇编</span><!--]--></a></div><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link next" href="/zig-course/engineering/build-system.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>Next page</span><span class="title" data-v-09de1c0f>构建系统</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><div style="margin-top:20px;"><!----></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"advanced_async.md\":\"B7dQuSbE\",\"about.md\":\"D4F1uo-B\",\"advanced_assembly.md\":\"jQaMPfT1\",\"advanced_memory_manage.md\":\"DqiOyIuN\",\"advanced_comptime.md\":\"Cy9v8jeT\",\"more_miscellaneous.md\":\"CswSJti_\",\"environment_install-environment.md\":\"h6TtzvVE\",\"environment_zig-command.md\":\"C1lwt4Ws\",\"epilogue.md\":\"D5zypIgE\",\"environment_editor.md\":\"mcXDwN_z\",\"basic_basic_type_char-and-boolean.md\":\"BrVaLUJ2\",\"basic_basic_type_function.md\":\"bTaIZDZj\",\"basic_union.md\":\"KamlY1Ki\",\"more_style_guide.md\":\"rM0e8CdA\",\"more_undefined_behavior.md\":\"gVpDlg8H\",\"basic_basic_type_number.md\":\"BOasTpDv\",\"advanced_type_cast.md\":\"CvgLeZru\",\"advanced_package_management.md\":\"B3X2A9vl\",\"hello-world.md\":\"B5CldrK1\",\"appendix_community.md\":\"CSBCE6dY\",\"appendix_well-known-lib.md\":\"NejLh4fK\",\"code_readme.md\":\"oVYMmRC7\",\"basic_define-variable.md\":\"CrFt3422\",\"engineering_unit-test.md\":\"a8KELbLC\",\"advanced_interact-with-c.md\":\"DP2Wx2rI\",\"more_atomic.md\":\"Du7xwiAo\",\"basic_process_control_loop.md\":\"BjWJMw0J\",\"basic_process_control_unreachable.md\":\"CnetKcTJ\",\"basic_process_control_decision.md\":\"BvY0Ai0_\",\"engineering_build-system.md\":\"Ci_NeRZe\",\"more_reflection.md\":\"rEZny4aQ\",\"basic_advanced_type_opaque.md\":\"BZsHQDnG\",\"basic_process_control_defer.md\":\"DWaXmrSG\",\"basic_advanced_type_silce.md\":\"FUJUMCfo\",\"basic_advanced_type_vector.md\":\"CvodNqvb\",\"basic_process_control_switch.md\":\"C46HJyUR\",\"more_zero-type.md\":\"DJlZbrbG\",\"more_wasm.md\":\"D8Wax6hP\",\"basic_optional_type.md\":\"B_bjOL28\",\"prologue.md\":\"BwY9wXza\",\"examples_echo_tcp_server.md\":\"DolS7OuG\",\"index.md\":\"BPYeLMIZ\",\"basic_advanced_type_pointer.md\":\"B7qH5Wf6\",\"basic_error_handle.md\":\"CkjoooAd\",\"basic_advanced_type_array.md\":\"B4q2eugZ\",\"basic_advanced_type_enum.md\":\"BeOi0kE_\",\"basic_advanced_type_struct.md\":\"BLrUcDI_\",\"more_builtin_func.md\":\"CQRgkd3H\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Zig 语言圣经\",\"description\":\"简单、快速地学习 Zig，ziglang中文教程，zig中文教程\",\"base\":\"/zig-course/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"editLink\":{\"pattern\":\"https://github.com/zigcc/zig-course/tree/main/course/:path\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"关于\",\"link\":\"/about\"}],\"sidebar\":[{\"text\":\"前言\",\"link\":\"/prologue\"},{\"text\":\"什么是 Zig ？\",\"link\":\"/\"},{\"text\":\"环境配置\",\"items\":[{\"text\":\"安装 Zig 环境\",\"link\":\"/environment/install-environment\"},{\"text\":\"编辑器选择\",\"link\":\"/environment/editor\"},{\"text\":\"zig 命令\",\"link\":\"/environment/zig-command\"}]},{\"text\":\"Hello World\",\"link\":\"/hello-world\"},{\"text\":\"基础学习\",\"items\":[{\"text\":\"变量声明\",\"link\":\"/basic/define-variable\"},{\"text\":\"基本类型\",\"collapsed\":true,\"items\":[{\"text\":\"数值类型\",\"link\":\"/basic/basic_type/number\"},{\"text\":\"字符与布尔值\",\"link\":\"/basic/basic_type/char-and-boolean\"},{\"text\":\"函数\",\"link\":\"/basic/basic_type/function\"}]},{\"text\":\"高级类型\",\"collapsed\":true,\"items\":[{\"text\":\"数组\",\"link\":\"/basic/advanced_type/array\"},{\"text\":\"向量\",\"link\":\"/basic/advanced_type/vector\"},{\"text\":\"指针\",\"link\":\"/basic/advanced_type/pointer\"},{\"text\":\"切片\",\"link\":\"/basic/advanced_type/silce\"},{\"text\":\"结构体\",\"link\":\"/basic/advanced_type/struct\"},{\"text\":\"枚举\",\"link\":\"/basic/advanced_type/enum\"},{\"text\":\"opaque\",\"link\":\"/basic/advanced_type/opaque\"}]},{\"text\":\"联合类型\",\"link\":\"/basic/union\"},{\"text\":\"流程控制\",\"collapsed\":true,\"items\":[{\"text\":\"条件\",\"link\":\"/basic/process_control/decision\"},{\"text\":\"循环\",\"link\":\"/basic/process_control/loop\"},{\"text\":\"switch匹配\",\"link\":\"/basic/process_control/switch\"},{\"text\":\"defer\",\"link\":\"/basic/process_control/defer\"},{\"text\":\"unreachable\",\"link\":\"/basic/process_control/unreachable\"}]},{\"text\":\"可选类型\",\"link\":\"/basic/optional_type\"},{\"text\":\"错误处理\",\"link\":\"/basic/error_handle\"}]},{\"text\":\"进阶学习\",\"items\":[{\"text\":\"类型转换\",\"link\":\"/advanced/type_cast\"},{\"text\":\"内存管理\",\"link\":\"/advanced/memory_manage\"},{\"text\":\"异步\",\"link\":\"/advanced/async\"},{\"text\":\"编译期\",\"link\":\"/advanced/comptime\"},{\"text\":\"包管理\",\"link\":\"/advanced/package_management\"},{\"text\":\"汇编\",\"link\":\"/advanced/assembly\"},{\"text\":\"与 C 交互\",\"link\":\"/advanced/interact-with-c\"}]},{\"text\":\"工程化\",\"items\":[{\"text\":\"构建系统\",\"link\":\"/engineering/build-system\"},{\"text\":\"单元测试\",\"link\":\"/engineering/unit-test\"}]},{\"text\":\"更多\",\"items\":[{\"text\":\"反射\",\"link\":\"/more/reflection\"},{\"text\":\"零位类型\",\"link\":\"/more/zero-type\"},{\"text\":\"原子操作\",\"link\":\"/more/atomic\"},{\"text\":\"未定义行为\",\"link\":\"/more/undefined_behavior\"},{\"text\":\"风格指南\",\"link\":\"/more/style_guide\"},{\"text\":\"杂项\",\"link\":\"/more/miscellaneous\"}]},{\"text\":\"示例\",\"items\":[{\"text\":\"echo server\",\"link\":\"/examples/echo_tcp_server\"}]},{\"text\":\"附录\",\"items\":[{\"text\":\"社区\",\"link\":\"/appendix/community\"},{\"text\":\"第三方库\",\"link\":\"/appendix/well-known-lib\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/zigcc/zig-course\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>